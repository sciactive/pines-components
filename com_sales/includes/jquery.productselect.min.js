/*
 * jQuery Product Select (productselect) Plugin 1.0.0
 *
 * Copyright (c) 2010 Zak Huber
 *
 * Licensed (along with all of Pines) under the GNU Affero GPL:
 *	  http://www.gnu.org/licenses/agpl.html
 */
(function(e){e.fn.productselect=function(t){var n=this;n.each(function(){var n=e(this);n.productselect_version="1.0.0";if(n.hasClass("ui-productselect"))return true;n.addClass("ui-productselect");var r={minLength:2,source:function(t,n){e.ajax({url:pines.com_sales_autoproduct_url,dataType:"json",data:{q:t.term},success:function(t){if(!t){n([]);return}n(e.map(t,function(e){return{id:pines.safe(e.guid),label:pines.safe(e.name)+'<small style="display: block; float: right;">$'+pines.safe(e.unit_price)+"</small>",value:e.sku,desc:e.receipt_description?"<em>"+pines.safe(e.receipt_description)+"</em>":""}}))}})}};if(typeof t!="undefined")e.extend(r,t);n.autocomplete(r).data("autocomplete")._renderItem=function(t,n){return e("<li></li>").data("item.autocomplete",n).append("<a><strong>"+n.label+"</strong><br />"+n.desc+"</a>").appendTo(t)};this.pines_productselect=n});return n}})(jQuery);